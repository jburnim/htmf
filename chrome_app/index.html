<!DOCTYPE html>
<html>
  <head>
    <title>HTMF</title>

    <script type="text/javascript">
      function handleMessage(msgEvent) {
        alert('Received:\n' + msgEvent.data);
        msg = JSON.parse(msgEvent.data);
        console.log(msg);
        updateBoard('board', msg.board);
      }

      function postMessage() {
        naclModule = document.getElementById('nacl_module');
        naclModule.postMessage('{}');
      }
    </script>

    <script type="text/javascript" src="hex.js"></script>
  </head>
  <body>

    <svg id="board" xmlns="http://www.w3.org/2000/svg" version="1.1"
         viewbox="0 0 100 100">
    </svg>

    <script type="text/javascript">
      function onBoardClick(x, y) {
        alert('(' + x + ', ' + y + ')');
        postMessage();
      }
      makeBoard('board', 50, 'onBoardClick');
    </script>

    <div id="embed_container">
      <script type="text/javascript">
        var container = document.getElementById('embed_container');
        container.addEventListener('message', handleMessage, true);
      </script>

      <embed name='nacl_module' id='nacl_module' width='1' height='1'
             src='build/htmf.nmf' type='application/x-nacl'/>
    </div>

    <div>
      <table>
        <button type='button' onclick='postMessage()'>PostMessage</button>
      </table>
    </div>

  </body>
</html>
